<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Disponibilité des Équipements</title>
  <link href="https://fonts.googleapis.com/css2?family=Comfortaa&display=swap" rel="stylesheet">
  <style>
    body {
      margin: 0;
      font-family: 'Comfortaa', cursive;
      background: #f5f5f5;
    }
.popup-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 9999;
}

.popup-box {
  background: white;
  padding: 24px;
  border-radius: 16px;
  box-shadow: 0 4px 20px rgba(0,0,0,0.2);
  text-align: center;
  max-width: 90%;
  width: 320px;
  font-family: 'Comfortaa', cursive;
  animation: fadeIn 0.3s ease-out;
}

.popup-box h3 {
  font-size: 20px;
  margin-bottom: 18px;
}

.popup-box button {
  padding: 10px 18px;
  border-radius: 8px;
  font-size: 16px;
  font-weight: bold;
  border: none;
  cursor: pointer;
  margin: 5px;
}

.use-btn {
  background-color: #d32f2f;
  color: white;
}

.cancel-btn {
  background-color: #eee;
  color: #333;
}

@keyframes fadeIn {
  from { opacity: 0; transform: scale(0.95); }
  to { opacity: 1; transform: scale(1); }
}
    header {
      background-color: #000;
      color: white;
      padding: 20px;
      text-align: center;
    }

    header img {
      height: 60px;
      display: block;
      margin: 0 auto 10px;
    }

    h1 {
      margin: 0;
      font-size: 24px;
      color: white;
    }

    .date-select {
      text-align: center;
      margin: 20px 0;
    }

    .date-select input {
      padding: 10px 18px;
      border-radius: 10px;
      border: 1px solid #ccc;
      font-size: 18px;
      font-family: 'Comfortaa', cursive;
      text-align: center;
    }

    .section {
      max-width: 800px;
      margin: 20px auto;
      background: white;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }

    .section-title {
      background: #fff;
      padding: 14px 20px;
      color: #d32f2f;
      font-weight: bold;
      font-size: 18px;
      text-align: center;
      border-bottom: 2px solid #d32f2f;
    }

    .row {
      display: flex;
      justify-content: space-between;
      padding: 14px 20px;
      border-bottom: 1px solid #eee;
      font-size: 16px;
      cursor: pointer;
      transition: background 0.2s;
    }

    .row:hover {
      background-color: #f9f9f9;
    }

    .status {
      font-weight: bold;
    }

    .planifie {
      color: #d32f2f;
    }

    .disponible {
      color: #2ecc71;
    }

    .back-button {
      display: block;
      text-align: center;
      margin: 40px auto;
      background-color: black;
      color: white;
      padding: 12px 24px;
      font-size: 16px;
      border: none;
      border-radius: 8px;
      font-family: 'Comfortaa', cursive;
      text-decoration: none;
      width: fit-content;
    }

    @media (max-width: 600px) {
      .row {
        flex-direction: column;
        gap: 8px;
        align-items: flex-start;
      }
    }
  </style>
</head>
<body>
  <header>
    <img src="assets/logo.jpeg" alt="Logo ELZ">
    <h1>Disponibilité des équipements</h1>
  </header>

  <div class="date-select">
    <input type="date" id="dateInput" />
  </div>

  <div id="content"></div>

  <a class="back-button" href="linktree.html">Retour au menu principal</a>

  <script>
    const sections = {
      "3 ESSIEUX": {
        "1906": "PLANIFIÉ",
        "2006": "DISPONIBLE",
        "2506": "PLANIFIÉ",
        "2706": "PLANIFIÉ"
      },
      "4 ESSIEUX": {
        "1505": "DISPONIBLE",
        "1605": "DISPONIBLE",
        "1805": "PLANIFIÉ",
        "1905": "PLANIFIÉ",
        "2205": "DISPONIBLE",
        "2405": "DISPONIBLE"
      },
      "CAMIONS": {
        "1103": "DISPONIBLE",
        "1202": "DISPONIBLE",
        "1303": "PLANIFIÉ",
        "1404": "DISPONIBLE",
        "1502": "PLANIFIÉ",
        "1603": "DISPONIBLE",
        "1703": "DISPONIBLE",
        "1803": "DISPONIBLE"
      }
    };

    const content = document.getElementById("content");

    for (const [title, items] of Object.entries(sections)) {
      const section = document.createElement("div");
      section.className = "section";

      const sectionTitle = document.createElement("div");
      sectionTitle.className = "section-title";
      sectionTitle.textContent = title;
      section.appendChild(sectionTitle);

      for (const [id, status] of Object.entries(items)) {
        const row = document.createElement("div");
        row.className = "row";

        const name = document.createElement("span");
        name.textContent = id;

        const statusSpan = document.createElement("span");
        statusSpan.textContent = status;
        statusSpan.className = "status " + (status === "PLANIFIÉ" ? "planifie" : "disponible");

        row.appendChild(name);
        row.appendChild(statusSpan);

        row.addEventListener("click", () => {
          const use = confirm(`Utiliser ${id} ?`);
          if (use) {
            const current = statusSpan.textContent;
            const isPlanifie = current === "PLANIFIÉ";
            statusSpan.textContent = isPlanifie ? "DISPONIBLE" : "PLANIFIÉ";
            statusSpan.className = "status " + (isPlanifie ? "disponible" : "planifie");
          }
        });

        section.appendChild(row);
      }
      content.appendChild(section);
    }
  </script>
  <script>
  let targetStatusCell = null;
  let currentEquipId = "";

  document.querySelectorAll('.row').forEach(row => {
    row.addEventListener('click', () => {
      const equip = row.querySelector('span').textContent.trim();
      const statusCell = row.querySelector('.status');
      const status = statusCell.classList.contains('planifie') ? 'planifie' : 'disponible';

      targetStatusCell = statusCell;
      currentEquipId = equip;

      const actionText = status === 'planifie'
        ? `Libérer ${equip}`
        : `Utiliser ${equip}`;

      document.getElementById('popup-text').textContent = actionText;
      document.getElementById('popup').style.display = 'flex';
    });
  });

  function closePopup() {
    document.getElementById('popup').style.display = 'none';
  }

  function confirmAction() {
    if (targetStatusCell) {
      const wasPlanifie = targetStatusCell.classList.contains('planifie');

      targetStatusCell.textContent = wasPlanifie ? 'DISPONIBLE' : 'PLANIFIÉ';
      targetStatusCell.classList.toggle('planifie');
      targetStatusCell.classList.toggle('disponible');
    }
    closePopup();
  }
</script>
  <div id="popup" class="popup-overlay">
  <div class="popup-box">
    <h3 id="popup-text">Action</h3>
    <button class="use-btn" onclick="confirmAction()">OK</button>
    <button class="cancel-btn" onclick="closePopup()">Annuler</button>
  </div>
</div>
</body>
</html>