<!DOCTYPE html>
<html lang="fr">
  <head>
    <!-- Favicon + Meta -->
    <link rel="icon" type="image/png" href="assets/favicon.png" />
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tableau des poids – Transport ELZ</title>

    <!-- Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Comfortaa&display=swap"
      rel="stylesheet"
    />

    <style>
      :root {
        --bg: #f5f5f5;
        --text: #333;
        --brand-dark: #111;
        --brand-accent: #c60000;
        --card: #fff;
        --muted: #6b7280;
        --radius: 12px;
        --shadow: 0 8px 24px rgba(0, 0, 0, 0.08);
      }

      /* ===== Base / Layout ===== */
      * {
        box-sizing: border-box;
      }
      html,
      body {
        height: 100%;
      }
      body {
        font-family: "Comfortaa", sans-serif;
        background: var(--bg);
        color: var(--text);
        margin: 0;
        padding: 0 0 80px 0; /* espace pour bouton retour */
      }

      header {
        background-color: var(--brand-dark);
        text-align: center;
        width: 100%;
        padding: 10px 0;
        box-sizing: border-box;
        position: sticky;
        top: 0; /* header collant */
        z-index: 50;
      }
      header img {
        height: 60px;
      }

      main {
        max-width: 1100px;
        margin: 0 auto;
        padding: 24px 16px;
      }

      h1 {
        text-align: center;
        margin: 12px auto 8px;
        font-size: clamp(20px, 3.5vw, 28px);
        letter-spacing: 0.5px;
      }
      p.subtitle {
        text-align: center;
        margin: 0 0 20px;
        color: var(--muted);
        font-size: 0.95rem;
      }

      /* ===== Controls ===== */
      .selectors {
        display: grid;
        grid-template-columns: repeat(3, minmax(0, 1fr));
        gap: 12px;
        margin: 16px 0 8px;
      }
      .control {
        display: grid;
        gap: 6px;
      }
      label {
        font-size: 0.9rem;
        color: var(--muted);
      }
      select {
        appearance: none;
        padding: 12px 14px;
        font-size: 16px;
        border-radius: 10px;
        border: 1px solid #e5e7eb;
        background: var(--card);
        box-shadow: var(--shadow);
        outline: none;
        transition: border 0.2s ease, box-shadow 0.2s ease;
      }
      select:focus {
        border-color: var(--brand-accent);
        box-shadow: 0 0 0 3px rgba(198, 0, 0, 0.12);
      }

      /* ===== Table ===== */
      .table-wrap {
        background: var(--card);
        border-radius: var(--radius);
        box-shadow: var(--shadow);
        overflow: auto;
        margin-top: 16px;
      }
      table {
        width: 100%;
        border-collapse: collapse;
        min-width: 520px;
      }
      thead th {
        position: sticky;
        top: 0;
        background: var(--brand-accent);
        color: #fff;
        text-align: center;
        font-weight: 700;
        letter-spacing: 0.5px;
        padding: 12px 10px;
      }
      thead th:first-child {
        background: #000;
      }

      tbody td {
        border-bottom: 1px solid #eee;
        padding: 12px 10px;
        text-align: center;
        font-size: 15px;
      }
      tbody tr:nth-child(even) td {
        background: #fafafa;
      }
      tbody td:first-child {
        text-align: left;
        font-weight: 700;
        color: #000;
      }

      /* Pastilles d’état (régulier / dégel) */
      .chip {
        display: inline-block;
        padding: 6px 10px;
        border-radius: 999px;
        font-size: 0.8rem;
        font-weight: 700;
      }
      .chip-regular {
        background: #ecfdf5;
        color: #065f46;
        border: 1px solid #d1fae5;
      }
      .chip-degel {
        background: #fff1f2;
        color: #9f1239;
        border: 1px solid #ffe4e6;
      }

      /* Notes */
      .notes {
        margin: 18px 0 6px;
        color: var(--muted);
        font-size: 0.95rem;
        line-height: 1.5;
        display: grid;
        gap: 4px;
      }

      /* Bouton retour (uniformisé) */
      .button-return {
        display: inline-block;
        margin: 28px auto 0;
        padding: 12px 24px;
        background-color: #000;
        color: #fff !important;
        text-decoration: none;
        border-radius: 8px;
        font-size: 16px;
        font-weight: 700;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        transition: background 0.25s ease;
      }
      .button-return:hover {
        background: #333;
        text-decoration: none;
      }

      @media (max-width: 860px) {
        .selectors {
          grid-template-columns: 1fr;
        }
      }

      /* Carte résultat mobile (plus jolie et sans coupe) */
      .result-card {
        display: none;
        background: #fff;
        border-radius: 12px;
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.08);
        padding: 20px 16px;
        margin: 12px 0 8px;
        text-align: center; /* ✅ Tout centré */
      }

      .result-top {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 10px;
        flex-wrap: wrap; /* <- permet au titre de passer sur 2 lignes */
      }

      .result-place {
        font-weight: 800;
        font-size: 1.1rem;
        line-height: 1.4;
        color: #111;
        margin-bottom: 10px; /* espace avec la chip */
      }
      .result-chip {
        display: inline-block;
        margin: 0 auto 20px; /* ↑ augmente l’espace avec le poids */
      }

      .result-weight {
        font-size: clamp(28px, 7vw, 38px);
        font-weight: 900;
        color: #c60000;
        letter-spacing: 0.5px;
        margin-top: 20px; /* espace supplémentaire au-dessus */
      }

      /* Pastilles (tu peux garder tes .chip existantes) */
      .chip {
        display: inline-block;
        padding: 6px 10px;
        border-radius: 999px;
        font-size: 0.8rem;
        font-weight: 700;
      }
      .chip-regular {
        background: #ecfdf5;
        color: #065f46;
        border: 1px solid #d1fae5;
      }
      .chip-degel {
        background: #fff1f2;
        color: #9f1239;
        border: 1px solid #ffe4e6;
      }

      /* Comportement responsive */
      @media (max-width: 768px) {
        .table-wrap {
          display: none;
        } /* on cache le tableau sur mobile */
        .result-card {
          display: block;
        } /* on montre la carte */
      }
    </style>
  </head>
  <body>
    <!-- Header uniforme -->
    <header>
      <img src="assets/logo.jpeg" alt="Logo Transport ELZ" />
    </header>

    <main>
      <h1>Tableau des poids par type de véhicule</h1>
      <p class="subtitle">
        Sélectionnez la configuration, la condition de route et l’endroit pour
        obtenir le poids maximal autorisé.
      </p>

      <!-- Sélecteurs -->
      <section class="selectors" aria-label="Filtres">
        <div class="control">
          <label for="variable1">Configuration</label>
          <select id="variable1" aria-label="Configuration de la citerne">
            <option value="B.45">4 ESSIEUX</option>
            <option value="B.32">3 ESSIEUX</option>
            <option value="B.31">3 ESSIEUX CITERNE 2006</option>
          </select>
        </div>
        <div class="control">
          <label for="variable2">Condition</label>
          <select id="variable2" aria-label="Condition de circulation">
            <option value="REGULIER">RÉGULIER</option>
            <option value="DEGEL">DÉGEL</option>
          </select>
        </div>
        <div class="control">
          <label for="variable3">Endroit</label>
          <select id="variable3" aria-label="Endroit">
            <option value="QUEBEC">QUÉBEC</option>
            <option value="MONTREAL">MONTRÉAL</option>
            <option value="ONTARIO">ONTARIO</option>
            <option value="MARITIMES">MARITIMES</option>
            <option value="NOUVELLE-ECOSSE">NOUVELLE-ÉCOSSE</option>
            <option value="MAINE_JACKMAN">MAINE VIA JACKMAN</option>
            <option value="NEW_HAMPSHIRE_JACKMAN">
              NEW HAMPSHIRE VIA JACKMAN
            </option>
            <option value="MAINE_STANSTEAD">MAINE VIA STANSTEAD</option>
            <option value="NEW_HAMPSHIRE_STANSTEAD">
              NEW HAMPSHIRE VIA STANSTEAD
            </option>
            <option value="VERMONT">VERMONT</option>
            <option value="MASSACHUSETTS">MASSACHUSETTS</option>
          </select>
        </div>
        <!-- Carte résultat (affichée uniquement sur mobile) -->
        <div class="result-card" id="resultCard" aria-live="polite">
          <div class="result-place" id="rcPlace">—</div>
          <div id="rcChip" class="chip chip-regular result-chip">RÉGULIER</div>
          <div class="result-weight" id="rcWeight">—</div>
        </div>
      </section>

      <!-- Résultats -->
      <div
        class="table-wrap"
        role="region"
        aria-label="Résultats des poids"
        tabindex="0"
      >
        <table id="resultTable">
          <thead>
            <tr>
              <th scope="col">ENDROIT</th>
              <th scope="col">POIDS</th>
            </tr>
          </thead>
          <tbody>
            <!-- Rempli par JS -->
          </tbody>
        </table>
      </div>

      <!-- Notes -->
      <div class="notes" aria-live="polite">
        <div>
          <strong>MAINE</strong> – Max <strong>100 000 lbs</strong> / 45 300 kg
        </div>
        <div>
          <strong>VERMONT</strong> – Max <strong>99 000 lbs</strong> / 44 900 kg
        </div>
        <div>
          <strong>NEW HAMPSHIRE</strong> – Max <strong>120 000 lbs</strong> / 54
          400 kg
        </div>
      </div>

      <!-- Bouton retour (uniformisé) -->
      <div style="text-align: center">
        <a href="linktree.html" class="button-return"
          >← Retour au menu principal</a
        >
      </div>
    </main>

    <script>
      const data = {
        QUEBEC: {
          "B.45": { REGULIER: "57 500 KG", DEGEL: "50 500 KG" },
          "B.32": { REGULIER: "49 500 KG", DEGEL: "43 000 KG" },
          "B.31": { REGULIER: "47 500 KG", DEGEL: "42 000 KG" },
        },
        MONTREAL: {
          "B.45": { REGULIER: "57 500 KG", DEGEL: "50 500 KG" },
          "B.32": { REGULIER: "49 500 KG", DEGEL: "43 000 KG" },
          "B.31": { REGULIER: "47 500 KG", DEGEL: "42 000 KG" },
        },
        ONTARIO: {
          "B.45": { REGULIER: "57 500 KG", DEGEL: "50 500 KG" },
          "B.32": { REGULIER: "49 500 KG", DEGEL: "43 000 KG" },
          "B.31": { REGULIER: "47 500 KG", DEGEL: "42 000 KG" },
        },
        MARITIMES: {
          "B.45": { REGULIER: "55 500 KG", DEGEL: "50 500 KG" },
          "B.32": { REGULIER: "44 000 KG", DEGEL: "43 000 KG" },
          "B.31": { REGULIER: "42 000 KG", DEGEL: "42 000 KG" },
        },
        "NOUVELLE-ECOSSE": {
          "B.45": { REGULIER: "55 500 KG", DEGEL: "50 500 KG" },
          "B.32": { REGULIER: "44 000 KG", DEGEL: "43 000 KG" },
          "B.31": { REGULIER: "42 000 KG", DEGEL: "42 000 KG" },
        },
        MAINE_JACKMAN: {
          "B.45": { REGULIER: "45 300 KG", DEGEL: "45 300 KG" },
          "B.32": { REGULIER: "45 300 KG", DEGEL: "43 000 KG" },
          "B.31": { REGULIER: "45 300 KG", DEGEL: "42 000 KG" },
        },
        NEW_HAMPSHIRE_JACKMAN: {
          "B.45": { REGULIER: "45 300 KG", DEGEL: "45 300 KG" },
          "B.32": { REGULIER: "45 300 KG", DEGEL: "43 000 KG" },
          "B.31": { REGULIER: "45 300 KG", DEGEL: "42 000 KG" },
        },
        MAINE_STANSTEAD: {
          "B.45": { REGULIER: "44 800 KG", DEGEL: "44 800 KG" },
          "B.32": { REGULIER: "44 900 KG", DEGEL: "43 000 KG" },
          "B.31": { REGULIER: "44 900 KG", DEGEL: "42 000 KG" },
        },
        NEW_HAMPSHIRE_STANSTEAD: {
          "B.45": { REGULIER: "44 800 KG", DEGEL: "44 800 KG" },
          "B.32": { REGULIER: "44 900 KG", DEGEL: "43 000 KG" },
          "B.31": { REGULIER: "44 900 KG", DEGEL: "42 000 KG" },
        },
        VERMONT: {
          "B.45": { REGULIER: "44 800 KG", DEGEL: "44 800 KG" },
          "B.32": { REGULIER: "44 900 KG", DEGEL: "43 000 KG" },
          "B.31": { REGULIER: "44 900 KG", DEGEL: "42 000 KG" },
        },
        MASSACHUSETTS: {
          "B.45": { REGULIER: "44 800 KG", DEGEL: "44 800 KG" },
          "B.32": { REGULIER: "44 900 KG", DEGEL: "43 000 KG" },
          "B.31": { REGULIER: "44 900 KG", DEGEL: "42 000 KG" },
        },
      };

      const v1 = document.getElementById("variable1");
      const v2 = document.getElementById("variable2");
      const v3 = document.getElementById("variable3");

      v1.addEventListener("change", updateTable);
      v2.addEventListener("change", updateTable);
      v3.addEventListener("change", updateTable);

      function updateTable() {
        const var1 = v1.value;
        const var2 = v2.value;
        const var3 = v3.value;
        const tbody = document.querySelector("#resultTable tbody");
        tbody.innerHTML = "";
        if (data[var3] && data[var3][var1]) {
          const tr = document.createElement("tr");
          tr.innerHTML = `<td>${prettyPlace(var3)} ${badge(var2)}</td><td>${
            data[var3][var1][var2]
          }</td>`;
          tbody.appendChild(tr);
        }
        // ▼▼ Mise à jour de la carte mobile ▼▼
        const rcPlace = document.getElementById("rcPlace");
        const rcWeight = document.getElementById("rcWeight");
        const rcChip = document.getElementById("rcChip");

        // Récupère le poids affiché (ou — si non trouvé)
        const poids =
          data[var3] && data[var3][var1] ? data[var3][var1][var2] : "—";

        rcPlace.textContent = prettyPlace(var3);
        rcWeight.textContent = poids;

        rcChip.textContent = var2 === "DEGEL" ? "DÉGEL" : "RÉGULIER";
        rcChip.className =
          "chip " + (var2 === "DEGEL" ? "chip-degel" : "chip-regular");
      }

      function prettyPlace(key) {
        return key
          .replace("QUEBEC", "QUÉBEC")
          .replace("MONTREAL", "MONTRÉAL")
          .replace("NOUVELLE-ECOSSE", "NOUVELLE-ÉCOSSE")
          .replace("MAINE_JACKMAN", "MAINE — via Jackman")
          .replace("NEW_HAMPSHIRE_JACKMAN", "NEW HAMPSHIRE — via Jackman")
          .replace("MAINE_STANSTEAD", "MAINE — via Stanstead")
          .replace("NEW_HAMPSHIRE_STANSTEAD", "NEW HAMPSHIRE — via Stanstead");
      }

      function badge(state) {
        return state === "DEGEL"
          ? `<span class="chip chip-degel">DÉGEL</span>`
          : `<span class="chip chip-regular">RÉGULIER</span>`;
      }

      // Initial
      updateTable();
    </script>
  </body>
</html>
